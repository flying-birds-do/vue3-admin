import{e as _,J as O,a0 as x,d as A,h as j,B as I,aH as L,a8 as U,ah as C,n as S,$ as z,w as N,r as F,o as K,q as H,W as R}from"./vue-4048d110.js";import{_ as T}from"./index-3976036e.js";var q=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],G=function(e){return q.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())!==-1},$=function(e,t,n){Object.keys(t).filter(G).forEach(function(i){var a=t[i];typeof a=="function"&&(i==="onInit"?a(e,n):n.on(i.substring(2),function(r){return a(r,n)}))})},W=function(e,t,n,i){var a=e.modelEvents?e.modelEvents:null,r=Array.isArray(a)?a.join(" "):a;_(i,function(c,l){n&&typeof c=="string"&&c!==l&&c!==n.getContent({format:e.outputFormat})&&n.setContent(c)}),n.on(r||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},Y=function(e,t,n,i,a,r){i.setContent(r()),n.attrs["onUpdate:modelValue"]&&W(t,n,i,a),$(e,n.attrs,i)},E=0,B=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return E++,e+"_"+n+E+String(t)},J=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},k=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},Q=function(e,t){return k(e).concat(k(t))},X=function(e){return e==null},w=function(){return{listeners:[],scriptId:B("tiny-script"),scriptLoaded:!1}},Z=function(){var e=w(),t=function(a,r,c,l){var o=r.createElement("script");o.referrerPolicy="origin",o.type="application/javascript",o.id=a,o.src=c;var v=function(){o.removeEventListener("load",v),l()};o.addEventListener("load",v),r.head&&r.head.appendChild(o)},n=function(a,r,c){e.scriptLoaded?c():(e.listeners.push(c),a.getElementById(e.scriptId)||t(e.scriptId,a,r,function(){e.listeners.forEach(function(l){return l()}),e.scriptLoaded=!0}))},i=function(){e=w()};return{load:n,reinitialize:i}},ee=Z(),ne=function(){return typeof window<"u"?window:global},d=function(){var e=ne();return e&&e.tinymce?e.tinymce:null},te={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},f=globalThis&&globalThis.__assign||function(){return f=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},f.apply(this,arguments)},ie=function(e,t,n,i){return e(i||"div",{id:t,ref:n})},ae=function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})},oe=O({props:te,setup:function(e,t){var n=e.init?f({},e.init):{},i=x(e),a=i.disabled,r=i.modelValue,c=i.tagName,l=A(null),o=null,v=e.id||B("tiny-vue"),y=e.init&&e.init.inline||e.inline,h=!!t.attrs["onUpdate:modelValue"],b=!0,D=e.initialValue?e.initialValue:"",p="",M=function(u){return h?function(){return r!=null&&r.value?r.value:""}:function(){return u?D:p}},g=function(){var u=M(b),s=f(f({},n),{readonly:e.disabled,selector:"#"+v,plugins:Q(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:y,setup:function(m){o=m,m.on("init",function(V){return Y(V,e,t,m,r,u)}),typeof n.setup=="function"&&n.setup(m)}});J(l.value)&&(l.value.style.visibility=""),d().init(s),b=!1};_(a,function(u){var s;o!==null&&(typeof((s=o.mode)===null||s===void 0?void 0:s.set)=="function"?o.mode.set(u?"readonly":"design"):o.setMode(u?"readonly":"design"))}),_(c,function(u){var s;h||(p=o.getContent()),(s=d())===null||s===void 0||s.remove(o),S(function(){return g()})}),j(function(){if(d()!==null)g();else if(l.value&&l.value.ownerDocument){var u=e.cloudChannel?e.cloudChannel:"5",s=e.apiKey?e.apiKey:"no-api-key",m=X(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/"+s+"/tinymce/"+u+"/tinymce.min.js":e.tinymceScriptSrc;ee.load(l.value.ownerDocument,m,g)}}),I(function(){d()!==null&&d().remove(o)}),y||(L(function(){b||g()}),U(function(){var u;h||(p=o.getContent()),(u=d())===null||u===void 0||u.remove(o)}));var P=function(u){var s;p=o.getContent(),(s=d())===null||s===void 0||s.remove(o),n=f(f({},n),u),S(function(){return g()})};return t.expose({rerender:P}),function(){return y?ie(C,v,l,e.tagName):ae(C,v,l)}}});const re={name:"Tinymce",components:{Editor:oe},props:{value:{type:String,default:""}},setup(e,t){const n=A(e.value),i=z({apiKey:"qagffr3pkuv17a8on1afax661irst1hbr4e6tbv888sz91jc",init:{language:"zh_CN",placeholder:"在这里输入文字",min_width:320,min_height:220,height:500,resize:"both",branding:!1,font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方=PingFang SC,Microsoft YaHei,sans-serif;宋体=simsun,serif;仿宋体=FangSong,serif;黑体=SimHei,sans-serif;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;",plugins:"print preview searchreplace autolink directionality visualblocks visualchars fullscreen image link media template code codesample table charmap hr pagebreak nonbreaking anchor insertdatetime advlist lists wordcount textpattern autosave emoticons",toolbar:["fullscreen undo redo restoredraft | cut copy paste pastetext | forecolor backcolor bold italic underline strikethrough link anchor | alignleft aligncenter alignright alignjustify outdent indent | bullist numlist | blockquote subscript superscript removeformat ","styleselect formatselect fontselect fontsizeselect |  table image axupimgs media emoticons charmap hr pagebreak insertdatetime  selectall visualblocks searchreplace | code print preview | indent2em lineheight formatpainter"],paste_data_images:!0,file_picker_types:"file image media"}});return N(()=>{t.emit("update:value",n.value)}),{content:n,...x(i)}}};const le={className:"tinymce-boxz"};function ue(e,t,n,i,a,r){const c=F("Editor");return K(),H("div",le,[R(c,{modelValue:i.content,"onUpdate:modelValue":t[0]||(t[0]=l=>i.content=l),"api-key":e.apiKey,init:e.init},null,8,["modelValue","api-key","init"])])}const de=T(re,[["render",ue],["__scopeId","data-v-5f821492"]]);export{de as default};
